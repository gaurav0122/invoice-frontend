<div class="container">
  <h2>Invoice Generator</h2>

  <form [formGroup]="invoiceForm" (ngSubmit)="submitInvoice()">
    <div class="form-group">
      <label>Invoice/Quotation Number:</label>
      <input type="number" formControlName="invoiceNumber" class="form-control" required />
    </div>
    <!-- Firm Details -->
    <div class="form-group">
      <label>Firm Name:</label>
      <input type="text" formControlName="firmName" class="form-control" required />
    </div>

    <div class="form-group">
      <label>Firm Address:</label>
      <textarea formControlName="firmAddress" class="form-control" required></textarea>
    </div>

    <!-- Dynamic Item Rows -->
    <h3>Invoice Items</h3>
    <table class="table">
      <thead>
        <tr>
          <th>Particular</th>
          <th>Quantity</th>
          <th>Rate</th>
          <th>Amount</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody formArrayName="items" >
        <tr *ngFor="let item of items.controls; let i = index" [formGroupName]="i">
          <td><textarea type="text" formControlName="particular" class="form-control" required ></textarea></td>
          <td><input type="number" formControlName="qty" class="form-control" required /></td>
          <td><input type="number" formControlName="rate" class="form-control" required /></td>
          <td>{{ item.get('qty')?.value * item.get('rate')?.value }}</td>
          <td>
            <button type="button" class="btn btn-danger" (click)="removeItem(i)">Remove</button>
          </td>
        </tr>

      </tbody>
    </table>

    <button type="button" class="btn btn-primary" (click)="addItem()">Add Item</button>

    <!-- Total Price -->
    <h4>Total: â‚¹{{ getTotal() }}</h4>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-success">Generate Invoice</button>
  </form>
</div>
